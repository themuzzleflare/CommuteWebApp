{"version":3,"sources":["components/Header.tsx","components/Main.tsx","App.tsx","components/CKConfigErrorModal.ts","components/TripsChangesToast.tsx","components/CloudKitJS.ts","components/SearchFunction.ts","components/PageIsLoading.tsx","components/TripListItemElement.tsx","components/RenderTrips.tsx","components/ShowErrorAlert.tsx","components/FetchTrips.ts","components/ErrorModal.ts","components/AddTrip.ts","components/AddTripWorkflow.ts","components/FormLabel.tsx","components/StationOptionElement.tsx","components/StationDatalistElement.tsx","components/AddTripInputs.ts","components/FinalElement.tsx","components/RenderStations.tsx","components/FetchStations.ts","components/AddTripAction.ts","components/RefreshTrips.ts","components/SearchBarIsVisible.tsx","index.tsx"],"names":["Header","className","href","alt","width","height","src","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","aria-current","Main","App","CKConfigErrorModal","error","modalElement","document","createElement","dialogElement","contentElement","headerElement","titleElement","headerButtonElement","bodyElement","bodyParagraphElement","footerElement","closeButton","uuid","uuidv4","classList","add","setAttribute","innerText","ckErrorCode","reason","message","textContent","append","bootstrap","TripsChangesToast","notification","bodyEl","notificationID","titleEl","data-bs-dismiss","toastHeader","toastEl","role","aria-live","aria-atomic","ReactDOM","render","getElementById","toastElem","addEventListener","unmountComponentAtNode","ckConfig","containers","containerIdentifier","environment","apnsEnvironment","apiTokenAuth","apiToken","persist","signInButton","theme","signOutButton","services","logger","console","CloudKitJS","CloudKit","SearchFunction","index","filter","value","toUpperCase","liEls","getElementsByTagName","length","indexOf","style","display","PageIsLoading","bool","spanElement","spinnerEl","centerEl","TripListItemElement","record","itemChild","fields","CD_fromName","split","join","CD_toName","CD_id","recordName","RenderTrips","records","elements","map","tripsEl","ShowErrorAlert","messageChild","buttonElement","messageElement","headingElement","alertElement","FetchTrips","database","getDefaultContainer","privateCloudDatabase","SearchBarIsVisible","performQuery","recordType","sortBy","fieldName","ascending","zoneID","zoneName","resultsLimit","desiredKeys","numbersAsStrings","then","response","hasErrors","errors","catch","ErrorModal","show","retryButton","onclick","AddTrip","fromStationInputEl","toStationInputEl","fromStationOptionQuerySelector","toStationOptionQuerySelector","fromStationOptionEl","querySelector","toStationOptionEl","CD_entityName","CD_fromId","CD_fromStopId","getAttribute","CD_toId","CD_toStopId","CD_dateAdded","Date","now","saveRecords","log","AddTripWorkflow","fromToStationsEl","cancelButton","addButton","toggleAttribute","event","modalEl","getInstance","dispose","remove","FormLabel","StationOptionElement","stopid","stopId","name","StationDatalistElement","AddTripInputs","addTripButton","fromStationDatalist","toStationDatalist","fromStationOptions","Array","from","toStationOptions","tripsListEl","tripsListItems","fromStationNames","option","toStationNames","tripNames","trip","includes","removeAttribute","FinalElement","labelEl","htmlFor","inputEl","list","placeholder","onInput","RenderStations","formElement","FetchStations","publicCloudDatabase","AddTripAction","RefreshTrips","addButtonEl","onClick","refreshButtonEl","searchBarEl","onKeyUp","searchBarRowEl","displayUsername","userIdentity","usernameString","nameObject","nameComponents","givenName","familyName","userRecordName","usernameEl","StrictMode","container","goToAuthenticatedState","renderNotification","addNotificationListener","registerForNotifications","isRegisteredForNotifications","registerNotifications","whenUserSignsOut","goToUnauthenticatedState","whenUserSignsIn","setUpAuth","setupAuthentication"],"mappings":"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","file":"static/js/main.4fa53f79.chunk.js","sourcesContent":["// Copyright © 2021 Paul Tavitian\n\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nfunction Header(): JSX.Element {\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n      <div className=\"container-fluid\">\n        <a className=\"navbar-brand hstack gap-2\" href=\"index.html\">\n          <img className=\"d-inline-block align-text-center rounded-3\" alt=\"Commute\" width=\"50\" height=\"50\"\n               src=\"images/logo.png\" />\n          Commute\n        </a>\n        <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarContent\"\n                aria-controls=\"navbarContent\" aria-expanded=\"false\" aria-label=\"Toggle Navigation\">\n          <span className=\"navbar-toggler-icon\" />\n        </button>\n        <div id=\"navbarContent\" className=\"collapse navbar-collapse\">\n          <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n            <li className=\"nav-item\">\n              <a className=\"nav-link active\" aria-current=\"page\" href=\"index.html\">Trips</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"stations.html\">Stations</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"tools.html\">Tools</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"about.html\">About</a>\n            </li>\n          </ul>\n          <div className=\"d-flex\">\n            <div id=\"apple-sign-in-button\" />\n            <div id=\"apple-sign-out-button\" />\n          </div>\n          <div id=\"username\" />\n        </div>\n      </div>\n    </nav>\n  );\n}\n\nexport default Header;","// Copyright © 2021 Paul Tavitian\n\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nfunction Main(): JSX.Element {\n  return (\n    <div>\n      <div id=\"alertPlaceholder\"/>\n      <div id=\"searchBar\"/>\n      <div id=\"trips\"/>\n      <div id=\"spinner\"/>\n      <div id=\"toastPlaceholder\" className=\"position-absolute bottom-0 end-0 p-3\"/>\n    </div>\n  );\n}\n\nexport default Main;","// Copyright © 2021 Paul Tavitian\n\nimport React from 'react';\nimport Header from './components/Header';\nimport Main from './components/Main';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nfunction App(): JSX.Element {\n  return (\n    <div>\n      <Header />\n      <Main />\n    </div>\n  );\n}\n\nexport default App;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport * as bootstrap from \"bootstrap\";\nimport {v4 as uuidv4} from \"uuid\";\n\nfunction CKConfigErrorModal(error: CloudKit.CKError | undefined): bootstrap.Modal {\n  var modalElement: HTMLElement = document.createElement(\"div\");\n  var dialogElement: HTMLElement = document.createElement(\"div\");\n  var contentElement: HTMLElement = document.createElement(\"div\");\n  var headerElement: HTMLElement = document.createElement(\"div\");\n  var titleElement: HTMLElement = document.createElement(\"h5\");\n  var headerButtonElement: HTMLElement = document.createElement(\"button\");\n  var bodyElement: HTMLElement = document.createElement(\"div\");\n  var bodyParagraphElement: HTMLElement = document.createElement(\"p\");\n  var footerElement: HTMLElement = document.createElement(\"div\");\n  var closeButton: HTMLElement = document.createElement(\"button\");\n  modalElement.id = error?.uuid ?? uuidv4();\n  modalElement.classList.add(\"modal\");\n  modalElement.classList.add(\"fade\");\n  modalElement.setAttribute(\"tabindex\", \"-1\");\n  modalElement.setAttribute(\"aria-labelledby\", \"label-\" + modalElement.id);\n  modalElement.setAttribute(\"aria-hidden\", \"true\");\n  dialogElement.className = \"modal-dialog\";\n  contentElement.className = \"modal-content\";\n  headerElement.className = \"modal-header\";\n  titleElement.id = \"label-\" + modalElement.id;\n  titleElement.className = \"modal-title\";\n  titleElement.innerText = error?.ckErrorCode ?? \"Error\";\n  headerButtonElement.className = \"btn-close\";\n  headerButtonElement.setAttribute(\"type\", \"button\");\n  headerButtonElement.setAttribute(\"data-bs-dismiss\", \"modal\");\n  headerButtonElement.setAttribute(\"aria-label\", \"Close\");\n  bodyElement.className = \"modal-body\";\n  // @ts-ignore\n  bodyParagraphElement.innerText = error?.reason ?? error?.message ?? \"An unknown error occurred.\";\n  footerElement.className = \"modal-footer\";\n  closeButton.classList.add(\"btn\");\n  closeButton.classList.add(\"btn-secondary\");\n  closeButton.setAttribute(\"type\", \"button\");\n  closeButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  closeButton.textContent = \"Close\";\n  footerElement.append(closeButton);\n  bodyElement.append(bodyParagraphElement);\n  headerElement.append(titleElement, headerButtonElement);\n  contentElement.append(headerElement, bodyElement, footerElement);\n  dialogElement.append(contentElement);\n  modalElement.append(dialogElement);\n  return new bootstrap.Modal(modalElement);\n}\n\nexport default CKConfigErrorModal;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport * as bootstrap from \"bootstrap\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nfunction TripsChangesToast(notification: CloudKit.Notification): bootstrap.Toast {\n  var bodyEl: JSX.Element = (\n    <div className=\"toast-body\" key={notification.notificationID + \"-bodyKey\"}>\n      A change has been made to your saved trips from another device. Please refresh.\n    </div>\n  );\n\n  var titleEl: JSX.Element = (\n    <strong className=\"me-auto\" key={notification.notificationID + \"-titleKey\"}>\n      Change made to Trips\n    </strong>\n  );\n\n  var closeButton: JSX.Element = (\n    <button className=\"btn-close\" type=\"button\" data-bs-dismiss=\"toast\" aria-label=\"Close\" key={notification.notificationID + \"-closeButtonKey\"} />\n  );\n\n  var toastHeader: JSX.Element = (\n    <div className=\"toast-header\" key={notification.notificationID + \"-headerKey\"}>\n      {[titleEl, closeButton]}\n    </div>\n  );\n\n  var toastEl: JSX.Element = (\n    <div id=\"tripsChangeNotification\" className=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n      {[toastHeader, bodyEl]}\n    </div>\n  );\n\n  ReactDOM.render(toastEl, document.getElementById(\"toastPlaceholder\"));\n\n  var toastElem: HTMLElement = document.getElementById(\"tripsChangeNotification\")!;\n\n  toastElem.addEventListener(\"hidden.bs.toast\", () => {\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"toastPlaceholder\")!);\n  });\n\n  return new bootstrap.Toast(toastElem);\n}\n\nexport default TripsChangesToast;\n","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\n\nvar ckServicesConfig: CloudKit.CloudKitConfigServicesObject = {\n  logger: console\n};\n\nvar commuteApiTokenAuth: CloudKit.ContainerConfigApiTokenAuthObject = {\n  apiToken: \"4ff6e686d07f5c352890701bcff389ed23a506ddfc27a57b8cb8118f16f82ba4\",\n  persist: true,\n  signInButton: {\n    id: \"apple-sign-in-button\",\n    theme: \"white-with-outline\"\n  },\n  signOutButton: {\n    id: \"apple-sign-out-button\",\n    theme: \"white-with-outline\"\n  }\n};\n\nvar commuteContainerConfig: CloudKit.ContainerConfigLike = {\n  containerIdentifier: \"iCloud.cloud.tavitian.commute\",\n  environment: \"production\",\n  apnsEnvironment: \"production\",\n  apiTokenAuth: commuteApiTokenAuth\n}\n\nvar ckConfig: CloudKit.CloudKitConfig = {\n  containers: [commuteContainerConfig],\n  services: ckServicesConfig\n};\n\nvar CloudKitJS: CloudKit.CloudKit = CloudKit.configure(ckConfig);\n\nexport default CloudKitJS;","// Copyright © 2021 Paul Tavitian\n\nfunction SearchFunction(): void {\n  var inputEl: HTMLElement = document.getElementById(\"tripsSearch\")!;\n  // @ts-ignore\n  var filter: string = inputEl.value.toUpperCase();\n  var ulEl: HTMLElement = document.getElementById(\"tripsList\")!;\n  var liEls: HTMLCollectionOf<HTMLLIElement> = ulEl.getElementsByTagName(\"li\");\n  var index: number;\n  var txtValue: string;\n\n  for (index = 0; index < liEls.length; index++) {\n    txtValue = liEls[index].textContent || liEls[index].innerText;\n\n    if (txtValue.toUpperCase().indexOf(filter) > -1) {\n      liEls[index].style.display = \"\";\n    } else {\n      liEls[index].style.display = \"none\";\n    }\n  }\n}\n\nexport default SearchFunction;","// Copyright © 2021 Paul Tavitian\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nfunction PageIsLoading(bool: boolean): void {\n  if (bool) {\n    var spanElement: JSX.Element = (\n      <span className=\"visually-hidden\">\n        Loading...\n      </span>\n    );\n\n    var spinnerEl: JSX.Element = (\n      <div className=\"spinner-border m-5\" role=\"status\">\n        {spanElement}\n      </div>\n    );\n\n    var centerEl: JSX.Element = (\n      <div className=\"d-flex justify-content-center\">\n        {spinnerEl}\n      </div>\n    );\n\n    ReactDOM.render(centerEl, document.getElementById(\"spinner\"));\n  } else {\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"spinner\")!);\n  }\n}\n\nexport default PageIsLoading;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport React from \"react\";\n\nfunction TripListItemElement(record: CloudKit.RecordLike): JSX.Element {\n  // @ts-ignore\n  const itemChild: string = record.fields.CD_fromName.value.split(\" Station\").join(\"\") + \" to \" + record.fields.CD_toName.value.split(\" Station\").join(\"\");\n\n  return (\n    // @ts-ignore\n    <li id={record.fields.CD_id.value} className=\"list-group-item\" key={record.recordName}>\n      {itemChild}\n    </li>\n  );\n}\n\nexport default TripListItemElement;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport TripListItemElement from \"./TripListItemElement\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nfunction RenderTrips(records: CloudKit.RecordLike[]): void {\n  var elements: JSX.Element[] = records.map(record => TripListItemElement(record));\n\n  var tripsEl: JSX.Element = (\n    <ul id=\"tripsList\" className=\"list-group list-group-flush\">\n      {elements}\n    </ul>\n  );\n\n  ReactDOM.render(tripsEl, document.getElementById(\"trips\"));\n}\n\nexport default RenderTrips;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nfunction ShowErrorAlert(error: CloudKit.CKError | undefined): void {\n  // @ts-ignore\n  const messageChild: string = error?.reason ?? error?.message ?? \"An unknown error occurred.\";\n\n  var buttonElement: JSX.Element = (\n    <button className=\"btn-close\" type=\"button\" data-bs-dismiss=\"alert\" aria-label=\"Close\" key=\"closeButtonKey\" />\n  );\n\n  var messageElement: JSX.Element = (\n    <p className=\"mb-0\" key=\"messageKey\">\n      {messageChild}\n    </p>\n  );\n\n  var headingElement: JSX.Element = (\n    <h5 className=\"alert-heading\" key=\"headingKey\">\n      {error?.ckErrorCode ?? \"Error\"}\n    </h5>\n  );\n\n  var alertElement: JSX.Element = (\n    <div className=\"alert alert-danger alert-dismissible fade show m-2\" role=\"alert\">\n      {[headingElement, messageElement, buttonElement]}\n    </div>\n  );\n\n  ReactDOM.render(alertElement, document.getElementById(\"alertPlaceholder\"));\n}\n\nexport default ShowErrorAlert;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport CloudKitJS from \"./CloudKitJS\";\nimport ErrorModal from \"./ErrorModal\";\nimport PageIsLoading from \"./PageIsLoading\";\nimport SearchBarIsVisible from \"./SearchBarIsVisible\";\nimport RenderTrips from \"./RenderTrips\";\nimport ShowErrorAlert from \"./ShowErrorAlert\";\n\nfunction FetchTrips(): void {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n  var database: CloudKit.Database = container.privateCloudDatabase;\n\n  PageIsLoading(true);\n  SearchBarIsVisible(false);\n\n  var query: CloudKit.Query = {\n    recordType: \"CD_Trip\",\n    sortBy: [\n      {\n        fieldName: \"CD_dateAdded\",\n        ascending: false\n      },\n      {\n        fieldName: \"CD_fromName\",\n        ascending: true\n      },\n      {\n        fieldName: \"CD_toName\",\n        ascending: true\n      }\n    ]\n  };\n\n  var options: CloudKit.RecordFetchOptions = {\n    zoneID: {\n      zoneName: \"com.apple.coredata.cloudkit.zone\"\n    },\n    resultsLimit: 200,\n    desiredKeys: [\n      \"CD_id\",\n      \"CD_fromId\",\n      \"CD_fromStopId\",\n      \"CD_fromName\",\n      \"CD_toId\",\n      \"CD_toStopId\",\n      \"CD_toName\",\n      \"CD_dateAdded\"\n    ],\n    numbersAsStrings: false\n  };\n\n  database.performQuery(query, options)\n    .then(response => {\n      if (response.hasErrors) {\n        throw response.errors[0];\n      } else {\n        RenderTrips(response.records);\n        PageIsLoading(false);\n        SearchBarIsVisible(true);\n      }\n    })\n    .catch(error => {\n      PageIsLoading(false);\n      SearchBarIsVisible(false);\n      ShowErrorAlert(error);\n      ErrorModal(error).show();\n    });\n}\n\nexport default FetchTrips;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport * as bootstrap from \"bootstrap\";\nimport {v4 as uuidv4} from \"uuid\";\nimport FetchTrips from \"./FetchTrips\";\n\nfunction ErrorModal(error: CloudKit.CKError | undefined): bootstrap.Modal {\n  var modalElement: HTMLElement = document.createElement(\"div\");\n  var dialogElement: HTMLElement = document.createElement(\"div\");\n  var contentElement: HTMLElement = document.createElement(\"div\");\n  var headerElement: HTMLElement = document.createElement(\"div\");\n  var titleElement: HTMLElement = document.createElement(\"h5\");\n  var headerButtonElement: HTMLElement = document.createElement(\"button\");\n  var bodyElement: HTMLElement = document.createElement(\"div\");\n  var bodyParagraphElement: HTMLElement = document.createElement(\"p\");\n  var footerElement: HTMLElement = document.createElement(\"div\");\n  var closeButton: HTMLElement = document.createElement(\"button\");\n  var retryButton: HTMLElement = document.createElement(\"button\");\n  modalElement.id = error?.uuid ?? uuidv4();\n  modalElement.classList.add(\"modal\");\n  modalElement.classList.add(\"fade\");\n  modalElement.setAttribute(\"tabindex\", \"-1\");\n  modalElement.setAttribute(\"aria-labelledby\", \"label-\" + modalElement.id);\n  modalElement.setAttribute(\"aria-hidden\", \"true\");\n  dialogElement.className = \"modal-dialog\";\n  contentElement.className = \"modal-content\";\n  headerElement.className = \"modal-header\";\n  titleElement.id = \"label-\" + modalElement.id;\n  titleElement.className = \"modal-title\";\n  titleElement.innerText = error?.ckErrorCode ?? \"Error\";\n  headerButtonElement.className = \"btn-close\";\n  headerButtonElement.setAttribute(\"type\", \"button\");\n  headerButtonElement.setAttribute(\"data-bs-dismiss\", \"modal\");\n  headerButtonElement.setAttribute(\"aria-label\", \"Close\");\n  bodyElement.className = \"modal-body\";\n  // @ts-ignore\n  bodyParagraphElement.innerText = error?.reason ?? error?.message ?? \"An unknown error occured.\";\n  footerElement.className = \"modal-footer\";\n  closeButton.classList.add(\"btn\");\n  closeButton.classList.add(\"btn-secondary\");\n  closeButton.setAttribute(\"type\", \"button\");\n  closeButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  closeButton.textContent = \"Close\";\n  retryButton.classList.add(\"btn\");\n  retryButton.classList.add(\"btn-primary\");\n  retryButton.setAttribute(\"type\", \"button\");\n  retryButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  retryButton.onclick = () => FetchTrips();\n  retryButton.textContent = \"Retry\";\n  footerElement.append(closeButton, retryButton);\n  bodyElement.append(bodyParagraphElement);\n  headerElement.append(titleElement, headerButtonElement);\n  contentElement.append(headerElement, bodyElement, footerElement);\n  dialogElement.append(contentElement);\n  modalElement.append(dialogElement);\n  return new bootstrap.Modal(modalElement);\n}\n\nexport default ErrorModal;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport CloudKitJS from \"./CloudKitJS\";\nimport {v4 as uuidv4} from \"uuid\";\nimport ErrorModal from \"./ErrorModal\";\n\nfunction AddTrip(): void {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n  var database: CloudKit.Database = container.privateCloudDatabase;\n\n  var fromStationInputEl: HTMLElement = document.getElementById(\"fromStationDataList\")!;\n  var toStationInputEl: HTMLElement = document.getElementById(\"toStationDataList\")!;\n\n  // @ts-ignore\n  var fromStationOptionQuerySelector: string = \"div[id='fromStation'] datalist[id='fromStationOptions'] option[value='\" + fromStationInputEl.value + \"']\";\n  // @ts-ignore\n  var toStationOptionQuerySelector: string = \"div[id='toStation'] datalist[id='toStationOptions'] option[value='\" + toStationInputEl.value + \"']\";\n\n  var fromStationOptionEl: HTMLElement = document.querySelector(fromStationOptionQuerySelector)!;\n  var toStationOptionEl: HTMLElement = document.querySelector(toStationOptionQuerySelector)!;\n\n  var record: CloudKit.RecordToCreate = {\n    recordType: \"CD_Trip\",\n    fields: {\n      CD_entityName: {\n        type: \"STRING\",\n        value: \"Trip\"\n      },\n      CD_id: {\n        type: \"STRING\",\n        value: uuidv4().toUpperCase()\n      },\n      CD_fromId: {\n        type: \"STRING\",\n        value: fromStationOptionEl.id\n      },\n      CD_fromStopId: {\n        type: \"STRING\",\n        value: fromStationOptionEl.getAttribute(\"stopid\")\n      },\n      CD_fromName: {\n        type: \"STRING\",\n        value: fromStationOptionEl.getAttribute(\"value\")\n      },\n      CD_toId: {\n        type: \"STRING\",\n        value: toStationOptionEl.id\n      },\n      CD_toStopId: {\n        type: \"STRING\",\n        value: toStationOptionEl.getAttribute(\"stopid\")\n      },\n      CD_toName: {\n        type: \"STRING\",\n        value: toStationOptionEl.getAttribute(\"value\")\n      },\n      CD_dateAdded: {\n        type: \"TIMESTAMP\",\n        value: Date.now()\n      }\n    }\n  };\n\n  var options: CloudKit.RecordSaveOptions = {\n    zoneID: {\n      zoneName: \"com.apple.coredata.cloudkit.zone\"\n    }\n  };\n\n  database.saveRecords([record], options)\n    .then(response => {\n      console.log(\"Successfully saved\");\n    })\n    .catch(error => {\n      console.error(error?.reason ?? \"Unknown error\");\n      ErrorModal(error).show();\n    });\n}\n\nexport default AddTrip;","// Copyright © 2021 Paul Tavitian\n\nimport * as bootstrap from \"bootstrap\";\nimport AddTrip from \"./AddTrip\";\n\nfunction AddTripWorkflow(): bootstrap.Modal {\n  var modalElement: HTMLElement = document.createElement(\"div\");\n  var dialogElement: HTMLElement = document.createElement(\"div\");\n  var contentElement: HTMLElement = document.createElement(\"div\");\n  var headerElement: HTMLElement = document.createElement(\"div\");\n  var titleElement: HTMLElement = document.createElement(\"h5\");\n  var headerButtonElement: HTMLElement = document.createElement(\"button\");\n  var bodyElement: HTMLElement = document.createElement(\"div\");\n  var fromToStationsEl: HTMLElement = document.createElement(\"div\");\n  var footerElement: HTMLElement = document.createElement(\"div\");\n  var cancelButton: HTMLElement = document.createElement(\"button\");\n  var addButton: HTMLElement = document.createElement(\"button\");\n  modalElement.id = \"addTripModal\";\n  modalElement.classList.add(\"modal\");\n  modalElement.classList.add(\"fade\");\n  modalElement.setAttribute(\"tabindex\", \"-1\");\n  modalElement.setAttribute(\"aria-labelledby\", \"label-\" + modalElement.id);\n  modalElement.setAttribute(\"aria-hidden\", \"true\");\n  dialogElement.className = \"modal-dialog\";\n  contentElement.className = \"modal-content\";\n  headerElement.className = \"modal-header\";\n  titleElement.id = \"label-\" + modalElement.id;\n  titleElement.className = \"modal-title\";\n  titleElement.innerText = \"New Trip\";\n  headerButtonElement.className = \"btn-close\";\n  headerButtonElement.setAttribute(\"type\", \"button\");\n  headerButtonElement.setAttribute(\"data-bs-dismiss\", \"modal\");\n  headerButtonElement.setAttribute(\"aria-label\", \"Close\");\n  bodyElement.className = \"modal-body\";\n  fromToStationsEl.id = \"fromToStations\";\n  footerElement.className = \"modal-footer\";\n  cancelButton.classList.add(\"btn\");\n  cancelButton.classList.add(\"btn-secondary\");\n  cancelButton.setAttribute(\"type\", \"button\");\n  cancelButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  cancelButton.textContent = \"Cancel\";\n  addButton.id = \"addTripButton\";\n  addButton.classList.add(\"btn\");\n  addButton.classList.add(\"btn-primary\");\n  addButton.setAttribute(\"type\", \"button\");\n  addButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  addButton.toggleAttribute(\"disabled\");\n  addButton.onclick = () => AddTrip();\n  addButton.textContent = \"Add\";\n  footerElement.append(cancelButton, addButton);\n  bodyElement.append(fromToStationsEl);\n  headerElement.append(titleElement, headerButtonElement);\n  contentElement.append(headerElement, bodyElement, footerElement);\n  dialogElement.append(contentElement);\n  modalElement.append(dialogElement);\n  modalElement.addEventListener(\"hidden.bs.modal\", event => {\n    var modalEl: HTMLElement = document.getElementById(\"addTripModal\")!;\n    var modal: bootstrap.Modal = bootstrap.Modal.getInstance(modalEl)!;\n    modal.dispose();\n    modalEl.remove();\n  });\n  return new bootstrap.Modal(modalElement);\n}\n\nexport default AddTripWorkflow;","// Copyright © 2021 Paul Tavitian\n\nimport StationType from \"./StationType\";\n\nfunction FormLabel(type: StationType): string {\n  if (type === \"fromStation\") {\n    return \"Origin\";\n  } else {\n    return \"Destination\";\n  }\n}\n\nexport default FormLabel;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport React from \"react\";\n\nfunction StationOptionElement(record: CloudKit.RecordLike): JSX.Element {\n  return (\n    // @ts-ignore\n    <option id={record.fields.id.value} stopid={record.fields.stopId.value} value={record.fields.name.value} key={record.recordName} />\n  );\n}\n\nexport default StationOptionElement;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport React from \"react\";\nimport StationType from \"./StationType\";\nimport StationOptionElement from \"./StationOptionElement\";\n\nfunction StationDatalistElement(records: CloudKit.RecordLike[], type: StationType): JSX.Element {\n  var elements: JSX.Element[] = records.map(function(record): JSX.Element {\n    return StationOptionElement(record);\n  });\n\n  return (\n    <datalist id={type + \"Options\"} key={type + \"OptionsKey\"}>\n      {elements}\n    </datalist>\n  );\n}\n\nexport default StationDatalistElement;","// Copyright © 2021 Paul Tavitian\n\nfunction AddTripInputs(): void {\n  var addTripButton: HTMLElement = document.getElementById(\"addTripButton\")!;\n  var fromStationInputEl: HTMLElement = document.getElementById(\"fromStationDataList\")!;\n  var toStationInputEl: HTMLElement = document.getElementById(\"toStationDataList\")!;\n  var fromStationDatalist: HTMLElement = document.getElementById(\"fromStationOptions\")!;\n  var toStationDatalist: HTMLElement = document.getElementById(\"toStationOptions\")!;\n  var fromStationOptions: HTMLOptionElement[] = Array.from(fromStationDatalist.getElementsByTagName(\"option\"));\n  var toStationOptions: HTMLOptionElement[] = Array.from(toStationDatalist.getElementsByTagName(\"option\"));\n  var tripsListEl: HTMLElement = document.getElementById(\"tripsList\")!;\n  var tripsListItems: HTMLLIElement[] = Array.from(tripsListEl.getElementsByTagName(\"li\"));\n  var fromStationNames: string[] = fromStationOptions.map(option => option.getAttribute(\"value\")!);\n  var toStationNames: string[] = toStationOptions.map(option => option.getAttribute(\"value\")!);\n  var tripNames: string[] = tripsListItems.map(trip => trip.innerText!);\n\n  // @ts-ignore\n  if (fromStationNames.includes(fromStationInputEl.value) && toStationNames.includes(toStationInputEl.value) && fromStationInputEl.value !== toStationInputEl.value && !tripNames.includes(fromStationInputEl.value.split(\" Station\").join(\"\") + \" to \" + toStationInputEl.value.split(\" Station\").join(\"\"))) {\n    addTripButton.removeAttribute(\"disabled\");\n  } else {\n    addTripButton.setAttribute(\"disabled\", \"\");\n  }\n}\n\nexport default AddTripInputs;","// Copyright © 2021 Paul Tavitian\n\nimport React from \"react\";\nimport StationType from \"./StationType\";\nimport FormLabel from \"./FormLabel\";\nimport StationDatalistElement from \"./StationDatalistElement\";\nimport AddTripInputs from \"./AddTripInputs\";\nimport * as CloudKit from 'tsl-apple-cloudkit';\n\nfunction FinalElement(records: CloudKit.RecordLike[], type: StationType): JSX.Element {\n  var labelEl: JSX.Element = (\n    <label htmlFor={type + \"DataList\"} className=\"form-label\" key={type + \"LabelKey\"}>\n      {FormLabel(type)}\n    </label>\n  );\n\n  var inputEl: JSX.Element = (\n    <input className=\"form-control\" list={type + \"Options\"} id={type + \"DataList\"} placeholder=\"Type to search...\" onInput={() => AddTripInputs()} key={type + \"InputKey\"} />\n  );\n\n  return (\n    <div id={type} key={type + \"WrapperKey\"}>\n      {[labelEl, inputEl, StationDatalistElement(records, type)]}\n    </div>\n  );\n}\n\nexport default FinalElement;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport FinalElement from \"./FinalElement\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nfunction RenderStations(records: CloudKit.RecordLike[]): void {\n\n  var formElement: JSX.Element = (\n    <form id=\"fromToStationsForm\" key=\"fromToStationsFormKey\">\n      {[FinalElement(records, \"fromStation\"), FinalElement(records, \"toStation\")]}\n    </form>\n  );\n\n  ReactDOM.render(formElement, document.getElementById(\"fromToStations\"));\n}\n\nexport default RenderStations;","// Copyright © 2021 Paul Tavitian\n\nimport * as CloudKit from \"tsl-apple-cloudkit\";\nimport CloudKitJS from \"./CloudKitJS\";\nimport RenderStations from \"./RenderStations\";\n\nfunction FetchStations(): void {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n  var database: CloudKit.Database = container.publicCloudDatabase;\n\n  var query: CloudKit.Query = {\n    recordType: \"Stations\",\n    sortBy: [\n      {\n        fieldName: \"name\",\n        ascending: true\n      }\n    ]\n  };\n\n  var options: CloudKit.RecordFetchOptions = {\n    resultsLimit: 200,\n    numbersAsStrings: false\n  };\n\n  database.performQuery(query, options)\n    .then(response => {\n      if (response.hasErrors) {\n        throw response.errors[0];\n      } else {\n        RenderStations(response.records);\n      }\n    })\n    .catch(error => {\n      console.error(error?.reason ?? \"Unknown error\");\n    });\n}\n\nexport default FetchStations;","// Copyright © 2021 Paul Tavitian\n\nimport AddTripWorkflow from \"./AddTripWorkflow\";\nimport FetchStations from \"./FetchStations\";\n\nfunction AddTripAction(): void {\n  AddTripWorkflow().show();\n  FetchStations();\n}\n\nexport default AddTripAction;","// Copyright © 2021 Paul Tavitian\n\nimport ReactDOM from \"react-dom\";\nimport FetchTrips from \"./FetchTrips\";\n\nfunction RefreshTrips(): void {\n  ReactDOM.unmountComponentAtNode(document.getElementById(\"trips\")!);\n  FetchTrips();\n}\n\nexport default RefreshTrips;","// Copyright © 2021 Paul Tavitian\n\nimport SearchFunction from \"./SearchFunction\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport AddTripAction from \"./AddTripAction\";\nimport RefreshTrips from \"./RefreshTrips\";\n\nfunction SearchBarIsVisible(bool: boolean): void {\n  if (bool) {\n    var addButtonEl: JSX.Element = (\n      <button className=\"btn btn-primary col-1\" type=\"button\" onClick={() => AddTripAction()} key=\"addButtonKey\">\n        Add\n      </button>\n    );\n\n    var refreshButtonEl: JSX.Element = (\n      <button className=\"btn btn-secondary col-1\" type=\"button\" onClick={() => RefreshTrips()} key=\"refreshButtonKey\">\n        Refresh\n      </button>\n    );\n\n    var searchBarEl: JSX.Element = (\n      <input id=\"tripsSearch\" className=\"form-control col\" onKeyUp={() => SearchFunction()} type=\"text\" placeholder=\"Search Trips\" key=\"searchKey\" />\n    );\n\n    var searchBarRowEl: JSX.Element = (\n      <div className=\"row m-2 gap-2\">\n        {[searchBarEl, refreshButtonEl, addButtonEl]}\n      </div>\n    );\n\n    ReactDOM.render(searchBarRowEl, document.getElementById(\"searchBar\"));\n  } else {\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"searchBar\")!);\n  }\n}\n\nexport default SearchBarIsVisible;\n","// Copyright © 2021 Paul Tavitian\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport App from './App';\nimport CKConfigErrorModal from \"./components/CKConfigErrorModal\";\nimport TripsChangesToast from \"./components/TripsChangesToast\";\nimport * as CloudKit from 'tsl-apple-cloudkit';\nimport CloudKitJS from \"./components/CloudKitJS\";\nimport SearchBarIsVisible from \"./components/SearchBarIsVisible\";\nimport FetchTrips from \"./components/FetchTrips\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nsetupAuthentication();\n\nfunction setupAuthentication(): CloudKit.Promise<(CloudKit.UserIdentity | null), CloudKit.CKError> {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n\n  function goToAuthenticatedState(userIdentity: CloudKit.UserIdentity): void {\n    displayUsername(userIdentity);\n    registerNotifications();\n    FetchTrips();\n\n    container\n      .whenUserSignsOut()\n      .then(goToUnauthenticatedState);\n  }\n\n  function goToUnauthenticatedState(error?: CloudKit.CKError): void {\n    if (error && error.ckErrorCode === \"AUTH_PERSIST_ERROR\") {\n      CKConfigErrorModal(error).show();\n    }\n\n    displayUsername(\"Unauthenticated User\");\n    SearchBarIsVisible(false);\n    ReactDOM.unmountComponentAtNode(document.getElementById(\"trips\")!);\n\n    container\n      .whenUserSignsIn()\n      .then(goToAuthenticatedState)\n      .catch(goToUnauthenticatedState);\n  }\n\n  return container.setUpAuth()\n    .then(userIdentity => {\n      if (userIdentity) {\n        console.log(\"Authentication successful\");\n        goToAuthenticatedState(userIdentity);\n      } else {\n        goToUnauthenticatedState();\n      }\n    })\n    .catch(error => {\n      console.error(error?.reason ?? \"Unknown error setting up authentication\");\n      CKConfigErrorModal(error).show();\n    });\n}\n\nfunction displayUsername(userIdentity: CloudKit.UserIdentity | string): void {\n  var usernameString: string;\n\n  if (typeof userIdentity === \"string\") {\n    usernameString = userIdentity;\n  } else {\n    var nameObject: CloudKit.NameComponents = userIdentity.nameComponents;\n\n    if (nameObject) {\n      usernameString = nameObject.givenName + \" \" + nameObject.familyName;\n    } else {\n      usernameString = \"User record name: \" + userIdentity.userRecordName;\n    }\n  }\n\n  var usernameEl: JSX.Element = (\n    <span className=\"navbar-text px-2\">\n      {usernameString}\n    </span>\n  );\n\n  ReactDOM.render(usernameEl, document.getElementById(\"username\"));\n}\n\nfunction registerNotifications(): CloudKit.Promise<CloudKit.Container, CloudKit.CKError> {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n\n  container.addNotificationListener(renderNotification);\n\n  function renderNotification(notification: CloudKit.Notification): void {\n    TripsChangesToast(notification).show();\n  }\n\n  return container.registerForNotifications()\n    .then(container => {\n      if (container.isRegisteredForNotifications) {\n        console.log(\"Notification registration successful\");\n      }\n    })\n    .catch(error => {\n      console.error(error?.reason ?? \"Unknown error registering for notifications\");\n      CKConfigErrorModal(error).show();\n    });\n}"],"sourceRoot":""}