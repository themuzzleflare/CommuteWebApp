{"version":3,"sources":["components/Header.tsx","components/Main.tsx","App.tsx","index.tsx"],"names":["Header","className","href","alt","width","height","src","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","aria-current","Main","App","ReactDOM","render","StrictMode","document","getElementById","ckConfig","containers","containerIdentifier","environment","apnsEnvironment","apiTokenAuth","apiToken","persist","signInButton","theme","signOutButton","services","logger","console","CloudKitJS","CloudKit","displayUsername","userIdentity","usernameString","nameObject","nameComponents","givenName","familyName","userRecordName","element","fetchTrips","database","getDefaultContainer","privateCloudDatabase","pageIsLoading","searchBarIsVisible","performQuery","recordType","sortBy","fieldName","ascending","zoneID","zoneName","resultsLimit","desiredKeys","numbersAsStrings","then","response","hasErrors","errors","records","elements","map","record","fields","itemChild","CD_fromName","value","split","join","CD_toName","CD_id","recordName","tripListItemElement","tripsEl","renderTrips","catch","error","buttonElement","data-bs-dismiss","messageChild","reason","message","messageElement","headingElement","ckErrorCode","alertElement","role","showErrorAlert","errorModal","show","fetchStations","publicCloudDatabase","finalElement","labelEl","htmlFor","formLabel","inputEl","list","placeholder","onInput","addTripButton","fromStationInputEl","toStationInputEl","fromStationDatalist","toStationDatalist","fromStationOptions","Array","from","getElementsByTagName","toStationOptions","tripsListEl","tripsListItems","fromStationNames","option","getAttribute","toStationNames","tripNames","trip","textContent","includes","removeAttribute","setAttribute","addTripInputs","stationDatalistElement","formElement","renderStations","stopid","stopId","name","stationOptionElement","bool","spanElement","spinnerEl","centerEl","unmountComponentAtNode","addButtonEl","onClick","modalElement","createElement","dialogElement","contentElement","headerElement","titleElement","headerButtonElement","bodyElement","fromToStationsEl","footerElement","cancelButton","addButton","classList","add","innerText","toggleAttribute","onclick","fromStationOptionQuerySelector","toStationOptionQuerySelector","fromStationOptionEl","querySelector","toStationOptionEl","CD_entityName","uuidv4","toUpperCase","CD_fromId","CD_fromStopId","CD_toId","CD_toStopId","CD_dateAdded","Date","now","options","saveRecords","addTrip","append","addEventListener","event","modalEl","bootstrap","getInstance","dispose","remove","addTripWorkflow","refreshButtonEl","unmountTrips","searchBarEl","onKeyUp","index","filter","liEls","length","indexOf","style","display","searchFunction","searchBarRowEl","bodyParagraphElement","closeButton","retryButton","uuid","ckConfigErrorModal","container","goToAuthenticatedState","renderNotification","notification","bodyEl","notificationID","titleEl","toastHeader","toastEl","aria-live","aria-atomic","toastElem","tripsChangeToast","addNotificationListener","registerForNotifications","isRegisteredForNotifications","log","registerNotifications","whenUserSignsOut","goToUnauthenticatedState","whenUserSignsIn","setUpAuth","setupAuthentication"],"mappings":"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","file":"static/js/main.c7879fcc.chunk.js","sourcesContent":["import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nfunction Header() {\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n      <div className=\"container-fluid\">\n        <a className=\"navbar-brand hstack gap-2\" href=\"index.html\">\n          <img className=\"d-inline-block align-text-center rounded-3\" alt=\"Commute\" width=\"50\" height=\"50\"\n               src=\"images/logo.png\" />\n          Commute\n        </a>\n        <button className=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarContent\"\n                aria-controls=\"navbarContent\" aria-expanded=\"false\" aria-label=\"Toggle Navigation\">\n          <span className=\"navbar-toggler-icon\" />\n        </button>\n        <div id=\"navbarContent\" className=\"collapse navbar-collapse\">\n          <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\n            <li className=\"nav-item\">\n              <a className=\"nav-link active\" aria-current=\"page\" href=\"index.html\">Trips</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"stations.html\">Stations</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"tools.html\">Tools</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"about.html\">About</a>\n            </li>\n          </ul>\n          <div className=\"d-flex\">\n            <div id=\"apple-sign-in-button\" />\n            <div id=\"apple-sign-out-button\" />\n          </div>\n          <div id=\"username\" />\n        </div>\n      </div>\n    </nav>\n  );\n}\n\nexport default Header;","import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nfunction Main() {\n  return (\n    <div>\n      <div id=\"alertPlaceholder\"/>\n      <div id=\"searchBar\"/>\n      <div id=\"trips\"/>\n      <div id=\"spinner\"/>\n      <div id=\"toastPlaceholder\" className=\"position-absolute bottom-0 end-0 p-3\"/>\n    </div>\n  );\n}\n\nexport default Main;","import React from 'react';\nimport Header from './components/Header';\nimport Main from './components/Main';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nfunction App() {\n  return (\n    <div>\n      <Header />\n      <Main />\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport App from './App';\nimport * as CloudKit from 'tsl-apple-cloudkit';\nimport * as bootstrap from 'bootstrap';\nimport {v4 as uuidv4} from 'uuid';\n\ntype StationType = \"fromStation\" | \"toStation\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nvar ckServicesConfig: CloudKit.CloudKitConfigServicesObject = {\n  logger: console\n};\n\nvar commuteApiTokenAuth: CloudKit.ContainerConfigApiTokenAuthObject = {\n  apiToken: \"4ff6e686d07f5c352890701bcff389ed23a506ddfc27a57b8cb8118f16f82ba4\",\n  persist: true,\n  signInButton: {\n    id: \"apple-sign-in-button\",\n    theme: \"white-with-outline\"\n  },\n  signOutButton: {\n    id: \"apple-sign-out-button\",\n    theme: \"white-with-outline\"\n  }\n};\n\nvar commuteContainerConfig: CloudKit.ContainerConfigLike = {\n  containerIdentifier: \"iCloud.cloud.tavitian.commute\",\n  environment: \"production\",\n  apnsEnvironment: \"production\",\n  apiTokenAuth: commuteApiTokenAuth\n}\n\nvar ckConfig: CloudKit.CloudKitConfig = {\n  containers: [commuteContainerConfig],\n  services: ckServicesConfig\n};\n\nvar CloudKitJS: CloudKit.CloudKit = CloudKit.configure(ckConfig);\n\nsetupAuthentication();\n\nfunction setupAuthentication(): CloudKit.Promise<(CloudKit.UserIdentity | null), CloudKit.CKError> {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n\n  function goToAuthenticatedState(userIdentity: CloudKit.UserIdentity): void {\n    displayUsername(userIdentity);\n    registerNotifications();\n    fetchTrips();\n\n    container\n      .whenUserSignsOut()\n      .then(goToUnauthenticatedState);\n  }\n\n  function goToUnauthenticatedState(error?: CloudKit.CKError): void {\n    if (error && error.ckErrorCode === \"AUTH_PERSIST_ERROR\") {\n      ckConfigErrorModal(error).show();\n    }\n\n    displayUsername(\"Unauthenticated User\");\n    searchBarIsVisible(false);\n    unmountTrips();\n\n    container\n      .whenUserSignsIn()\n      .then(goToAuthenticatedState)\n      .catch(goToUnauthenticatedState);\n  }\n\n  return container.setUpAuth()\n    .then(userIdentity => {\n      if (userIdentity) {\n        console.log(\"Authentication successful\");\n        goToAuthenticatedState(userIdentity);\n      } else {\n        goToUnauthenticatedState();\n      }\n    })\n    .catch(error => {\n      console.error(error?.reason ?? \"Unknown error setting up authentication\");\n      ckConfigErrorModal(error).show();\n    });\n}\n\nfunction displayUsername(userIdentity: CloudKit.UserIdentity | string): void {\n  var usernameString: string;\n\n  if (typeof userIdentity === \"string\") {\n    usernameString = userIdentity;\n  } else {\n    var nameObject: CloudKit.NameComponents = userIdentity.nameComponents;\n\n    if (nameObject) {\n      usernameString = nameObject.givenName + \" \" + nameObject.familyName;\n    } else {\n      usernameString = \"User record name: \" + userIdentity.userRecordName;\n    }\n  }\n\n  var element: JSX.Element = (\n    <span className=\"navbar-text px-2\">\n      {usernameString}\n    </span>\n  );\n\n  ReactDOM.render(element, document.getElementById(\"username\"));\n}\n\nfunction registerNotifications(): CloudKit.Promise<CloudKit.Container, CloudKit.CKError> {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n\n  container.addNotificationListener(renderNotification);\n\n  function renderNotification(notification: CloudKit.Notification): void {\n    tripsChangeToast(notification).show();\n  }\n\n  return container.registerForNotifications()\n    .then(container => {\n      if (container.isRegisteredForNotifications) {\n        console.log(\"Notification registration successful\");\n      }\n    })\n    .catch(error => {\n      console.error(error?.reason ?? \"Unknown error registering for notifications\");\n      ckConfigErrorModal(error).show();\n    });\n}\n\nfunction fetchTrips(): void {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n  var database: CloudKit.Database = container.privateCloudDatabase;\n\n  pageIsLoading(true);\n  searchBarIsVisible(false);\n\n  var query: CloudKit.Query = {\n    recordType: \"CD_Trip\",\n    sortBy: [\n      {\n        fieldName: \"CD_dateAdded\",\n        ascending: false\n      },\n      {\n        fieldName: \"CD_fromName\",\n        ascending: true\n      },\n      {\n        fieldName: \"CD_toName\",\n        ascending: true\n      }\n    ]\n  };\n\n  var options: CloudKit.RecordFetchOptions = {\n    zoneID: {\n      zoneName: \"com.apple.coredata.cloudkit.zone\"\n    },\n    resultsLimit: 200,\n    desiredKeys: [\n      \"CD_id\",\n      \"CD_fromId\",\n      \"CD_fromStopId\",\n      \"CD_fromName\",\n      \"CD_toId\",\n      \"CD_toStopId\",\n      \"CD_toName\",\n      \"CD_dateAdded\"\n    ],\n    numbersAsStrings: false\n  };\n\n  database.performQuery(query, options)\n    .then(response => {\n      if (response.hasErrors) {\n        throw response.errors[0];\n      } else {\n        renderTrips(response.records);\n        pageIsLoading(false);\n        searchBarIsVisible(true);\n      }\n    })\n    .catch(error => {\n      pageIsLoading(false);\n      searchBarIsVisible(false);\n      showErrorAlert(error);\n      errorModal(error).show();\n    });\n}\n\nfunction fetchStations(): void {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n  var database: CloudKit.Database = container.publicCloudDatabase;\n\n  var query: CloudKit.Query = {\n    recordType: \"Stations\",\n    sortBy: [\n      {\n        fieldName: \"name\",\n        ascending: true\n      }\n    ]\n  };\n\n  var options: CloudKit.RecordFetchOptions = {\n    resultsLimit: 200,\n    numbersAsStrings: false\n  };\n\n  database.performQuery(query, options)\n    .then(response => {\n      if (response.hasErrors) {\n        throw response.errors[0];\n      } else {\n        renderStations(response.records);\n      }\n    })\n    .catch(error => {\n      console.error(error?.reason ?? \"Unknown error\");\n    });\n}\n\nfunction renderStations(records: CloudKit.RecordLike[]): void {\n  function finalElement(type: StationType): JSX.Element {\n    var labelEl: JSX.Element = (\n      <label htmlFor={type + \"DataList\"} className=\"form-label\" key={type + \"LabelKey\"}>\n        {formLabel(type)}\n      </label>\n    );\n\n    var inputEl: JSX.Element = (\n      <input className=\"form-control\" list={type + \"Options\"} id={type + \"DataList\"} placeholder=\"Type to search...\" onInput={() => addTripInputs()} key={type + \"InputKey\"} />\n    );\n\n    return (\n      <div id={type} key={type + \"WrapperKey\"}>\n        {[labelEl, inputEl, stationDatalistElement(records, type)]}\n      </div>\n    );\n  }\n\n  function formLabel(type: StationType): string {\n    if (type === \"fromStation\") {\n      return \"Origin\";\n    } else {\n      return \"Destination\";\n    }\n  }\n\n  var formElement: JSX.Element = (\n    <form id=\"fromToStationsForm\" key=\"fromToStationsFormKey\">\n      {[finalElement(\"fromStation\"), finalElement(\"toStation\")]}\n    </form>\n  );\n\n  ReactDOM.render(formElement, document.getElementById(\"fromToStations\"));\n}\n\nfunction renderTrips(records: CloudKit.RecordLike[]): void {\n  var elements: JSX.Element[] = records.map(function(record): JSX.Element {\n    return tripListItemElement(record)\n  });\n\n  var tripsEl: JSX.Element = (\n    <ul id=\"tripsList\" className=\"list-group list-group-flush\">\n      {elements}\n    </ul>\n  );\n\n  ReactDOM.render(tripsEl, document.getElementById(\"trips\"));\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction noTripsElement(): JSX.Element {\n  return (\n    <li className=\"list-group-item\" key=\"noTripsKey\">\n      No trips were found.\n    </li>\n  );\n}\n\nfunction stationDatalistElement(records: CloudKit.RecordLike[], type: StationType): JSX.Element {\n  var elements: JSX.Element[] = records.map(function(record): JSX.Element {\n    return stationOptionElement(record);\n  });\n\n  return (\n    <datalist id={type + \"Options\"} key={type + \"OptionsKey\"}>\n      {elements}\n    </datalist>\n  );\n}\n\nfunction stationOptionElement(record: CloudKit.RecordLike): JSX.Element {\n  var fields: (Array<string> | {[name: string]: CloudKit.RecordField}) = record.fields!;\n\n  return (\n    // @ts-ignore\n    <option id={fields.id.value} stopid={fields.stopId.value} value={fields.name.value} key={record.recordName} />\n  );\n}\n\nfunction tripListItemElement(record: CloudKit.RecordLike): JSX.Element {\n  var fields: (Array<string> | {[name: string]: CloudKit.RecordField}) = record.fields!;\n\n  // @ts-ignore\n  var itemChild: string = fields.CD_fromName.value.split(\" Station\").join(\"\") + \" to \" + fields.CD_toName.value.split(\" Station\").join(\"\");\n\n  return (\n    // @ts-ignore\n    <li id={fields.CD_id.value} className=\"list-group-item\" key={record.recordName}>\n      {itemChild}\n    </li>\n  );\n}\n\nfunction showErrorAlert(error: CloudKit.CKError | undefined): void {\n  var buttonElement: JSX.Element = (\n    <button className=\"btn-close\" type=\"button\" data-bs-dismiss=\"alert\" aria-label=\"Close\" key=\"closeButtonKey\" />\n  );\n\n  // @ts-ignore\n  var messageChild: string = error?.reason ?? error?.message ?? \"An unknown error occurred.\";\n\n  var messageElement: JSX.Element = (\n    <p className=\"mb-0\" key=\"messageKey\">\n      {messageChild}\n    </p>\n  );\n\n  var headingElement: JSX.Element = (\n    <h5 className=\"alert-heading\" key=\"headingKey\">\n      {error?.ckErrorCode ?? \"Error\"}\n    </h5>\n  );\n\n  var alertElement: JSX.Element = (\n    <div className=\"alert alert-danger alert-dismissible fade show m-2\" role=\"alert\">\n      {[headingElement, messageElement, buttonElement]}\n    </div>\n  );\n\n  ReactDOM.render(alertElement, document.getElementById(\"alertPlaceholder\"));\n}\n\nfunction pageIsLoading(bool: boolean): void {\n  if (bool) {\n    var spanElement: JSX.Element = (\n      <span className=\"visually-hidden\">\n        Loading...\n      </span>\n    );\n\n    var spinnerEl: JSX.Element = (\n      <div className=\"spinner-border m-5\" role=\"status\">\n        {spanElement}\n      </div>\n    );\n\n    var centerEl: JSX.Element = (\n      <div className=\"d-flex justify-content-center\">\n        {spinnerEl}\n      </div>\n    );\n\n    ReactDOM.render(centerEl, document.getElementById(\"spinner\"));\n  } else {\n    unmountSpinner();\n  }\n}\n\nfunction searchBarIsVisible(bool: boolean): void {\n  if (bool) {\n    var addButtonEl: JSX.Element = (\n      <button className=\"btn btn-primary col-1\" type=\"button\" onClick={() => addTripAction()} key=\"addButtonKey\">\n        Add\n      </button>\n    );\n\n    var refreshButtonEl: JSX.Element = (\n      <button className=\"btn btn-secondary col-1\" type=\"button\" onClick={() => refreshTrips()} key=\"refreshButtonKey\">\n        Refresh\n      </button>\n    );\n\n    var searchBarEl: JSX.Element = (\n      <input id=\"tripsSearch\" className=\"form-control col\" onKeyUp={() => searchFunction()} type=\"text\" placeholder=\"Search Trips\" key=\"searchKey\" />\n    );\n\n    var searchBarRowEl: JSX.Element = (\n      <div className=\"row m-2 gap-2\">\n        {[searchBarEl, refreshButtonEl, addButtonEl]}\n      </div>\n    );\n\n    ReactDOM.render(searchBarRowEl, document.getElementById(\"searchBar\"));\n  } else {\n    unmountSearchBar();\n  }\n}\n\nfunction unmountTrips(): void {\n  ReactDOM.unmountComponentAtNode(document.getElementById(\"trips\")!);\n}\n\nfunction unmountSpinner(): void {\n  ReactDOM.unmountComponentAtNode(document.getElementById(\"spinner\")!);\n}\n\nfunction unmountSearchBar(): void {\n  ReactDOM.unmountComponentAtNode(document.getElementById(\"searchBar\")!);\n}\n\nfunction unmountToast(): void {\n  ReactDOM.unmountComponentAtNode(document.getElementById(\"toastPlaceholder\")!);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction tripsChangeToast(notification: CloudKit.Notification): bootstrap.Toast {\n  var bodyEl: JSX.Element = (\n    <div className=\"toast-body\" key={notification.notificationID + \"-bodyKey\"}>\n      A change has been made to your saved trips from another device. Please refresh.\n    </div>\n  );\n\n  var titleEl: JSX.Element = (\n    <strong className=\"me-auto\" key={notification.notificationID + \"-titleKey\"}>\n      Change made to Trips\n    </strong>\n  );\n\n  var closeButton: JSX.Element = (\n    <button className=\"btn-close\" type=\"button\" data-bs-dismiss=\"toast\" aria-label=\"Close\" key={notification.notificationID + \"-closeButtonKey\"} />\n  );\n\n  var toastHeader: JSX.Element = (\n    <div className=\"toast-header\" key={notification.notificationID + \"-headerKey\"}>\n      {[titleEl, closeButton]}\n    </div>\n  );\n\n  var toastEl: JSX.Element = (\n    <div id=\"tripsChangeNotification\" className=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n      {[toastHeader, bodyEl]}\n    </div>\n  );\n\n  ReactDOM.render(toastEl, document.getElementById(\"toastPlaceholder\"));\n\n  var toastElem: HTMLElement = document.getElementById(\"tripsChangeNotification\")!;\n\n  toastElem.addEventListener(\"hidden.bs.toast\", () => {\n    unmountToast();\n  });\n\n  return new bootstrap.Toast(toastElem);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction errorToast(error: CloudKit.CKError | undefined): bootstrap.Toast {\n  var toastContainer: HTMLElement = document.getElementById(\"toastPlaceholder\")!;\n  var toastEl: HTMLElement = document.createElement(\"div\");\n  var toastHeader: HTMLElement = document.createElement(\"div\");\n  var titleEl: HTMLElement = document.createElement(\"strong\");\n  var closeButton: HTMLElement = document.createElement(\"button\");\n  var bodyEl: HTMLElement = document.createElement(\"div\");\n  toastEl.id = error?.uuid ?? uuidv4();\n  toastEl.className = \"toast\";\n  toastEl.setAttribute(\"role\", \"alert\");\n  toastEl.setAttribute(\"aria-live\", \"assertive\");\n  toastEl.setAttribute(\"aria-atomic\", \"true\");\n  toastHeader.className = \"toast-header\";\n  titleEl.className = \"me-auto\";\n  titleEl.innerText = error?.ckErrorCode ?? \"Error\";\n  closeButton.className = \"btn-close\";\n  closeButton.setAttribute(\"type\", \"button\");\n  closeButton.setAttribute(\"data-bs-dismiss\", \"toast\");\n  closeButton.setAttribute(\"aria-label\", \"Close\");\n  toastHeader.append(titleEl, closeButton);\n  bodyEl.className = \"toast-body\";\n  // @ts-ignore\n  bodyEl.innerText = error?.reason ?? error?.message ?? \"An unknown error occurred.\";\n  toastEl.append(toastHeader, bodyEl);\n  toastContainer.append(toastEl);\n  return new bootstrap.Toast(document.getElementById(toastEl.id)!);\n}\n\nfunction errorModal(error: CloudKit.CKError | undefined): bootstrap.Modal {\n  var modalElement: HTMLElement = document.createElement(\"div\");\n  var dialogElement: HTMLElement = document.createElement(\"div\");\n  var contentElement: HTMLElement = document.createElement(\"div\");\n  var headerElement: HTMLElement = document.createElement(\"div\");\n  var titleElement: HTMLElement = document.createElement(\"h5\");\n  var headerButtonElement: HTMLElement = document.createElement(\"button\");\n  var bodyElement: HTMLElement = document.createElement(\"div\");\n  var bodyParagraphElement: HTMLElement = document.createElement(\"p\");\n  var footerElement: HTMLElement = document.createElement(\"div\");\n  var closeButton: HTMLElement = document.createElement(\"button\");\n  var retryButton: HTMLElement = document.createElement(\"button\");\n  modalElement.id = error?.uuid ?? uuidv4();\n  modalElement.classList.add(\"modal\");\n  modalElement.classList.add(\"fade\");\n  modalElement.setAttribute(\"tabindex\", \"-1\");\n  modalElement.setAttribute(\"aria-labelledby\", \"label-\" + modalElement.id);\n  modalElement.setAttribute(\"aria-hidden\", \"true\");\n  dialogElement.className = \"modal-dialog\";\n  contentElement.className = \"modal-content\";\n  headerElement.className = \"modal-header\";\n  titleElement.id = \"label-\" + modalElement.id;\n  titleElement.className = \"modal-title\";\n  titleElement.innerText = error?.ckErrorCode ?? \"Error\";\n  headerButtonElement.className = \"btn-close\";\n  headerButtonElement.setAttribute(\"type\", \"button\");\n  headerButtonElement.setAttribute(\"data-bs-dismiss\", \"modal\");\n  headerButtonElement.setAttribute(\"aria-label\", \"Close\");\n  bodyElement.className = \"modal-body\";\n  // @ts-ignore\n  bodyParagraphElement.innerText = error?.reason ?? error?.message ?? \"An unknown error occured.\";\n  footerElement.className = \"modal-footer\";\n  closeButton.classList.add(\"btn\");\n  closeButton.classList.add(\"btn-secondary\");\n  closeButton.setAttribute(\"type\", \"button\");\n  closeButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  closeButton.textContent = \"Close\";\n  retryButton.classList.add(\"btn\");\n  retryButton.classList.add(\"btn-primary\");\n  retryButton.setAttribute(\"type\", \"button\");\n  retryButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  retryButton.onclick = () => fetchTrips();\n  retryButton.textContent = \"Retry\";\n  footerElement.append(closeButton, retryButton);\n  bodyElement.append(bodyParagraphElement);\n  headerElement.append(titleElement, headerButtonElement);\n  contentElement.append(headerElement, bodyElement, footerElement);\n  dialogElement.append(contentElement);\n  modalElement.append(dialogElement);\n  return new bootstrap.Modal(modalElement);\n}\n\nfunction addTripWorkflow(): bootstrap.Modal {\n  var modalElement: HTMLElement = document.createElement(\"div\");\n  var dialogElement: HTMLElement = document.createElement(\"div\");\n  var contentElement: HTMLElement = document.createElement(\"div\");\n  var headerElement: HTMLElement = document.createElement(\"div\");\n  var titleElement: HTMLElement = document.createElement(\"h5\");\n  var headerButtonElement: HTMLElement = document.createElement(\"button\");\n  var bodyElement: HTMLElement = document.createElement(\"div\");\n  var fromToStationsEl: HTMLElement = document.createElement(\"div\");\n  var footerElement: HTMLElement = document.createElement(\"div\");\n  var cancelButton: HTMLElement = document.createElement(\"button\");\n  var addButton: HTMLElement = document.createElement(\"button\");\n  modalElement.id = \"addTripModal\";\n  modalElement.classList.add(\"modal\");\n  modalElement.classList.add(\"fade\");\n  modalElement.setAttribute(\"tabindex\", \"-1\");\n  modalElement.setAttribute(\"aria-labelledby\", \"label-\" + modalElement.id);\n  modalElement.setAttribute(\"aria-hidden\", \"true\");\n  dialogElement.className = \"modal-dialog\";\n  contentElement.className = \"modal-content\";\n  headerElement.className = \"modal-header\";\n  titleElement.id = \"label-\" + modalElement.id;\n  titleElement.className = \"modal-title\";\n  titleElement.innerText = \"New Trip\";\n  headerButtonElement.className = \"btn-close\";\n  headerButtonElement.setAttribute(\"type\", \"button\");\n  headerButtonElement.setAttribute(\"data-bs-dismiss\", \"modal\");\n  headerButtonElement.setAttribute(\"aria-label\", \"Close\");\n  bodyElement.className = \"modal-body\";\n  fromToStationsEl.id = \"fromToStations\";\n  footerElement.className = \"modal-footer\";\n  cancelButton.classList.add(\"btn\");\n  cancelButton.classList.add(\"btn-secondary\");\n  cancelButton.setAttribute(\"type\", \"button\");\n  cancelButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  cancelButton.textContent = \"Cancel\";\n  addButton.id = \"addTripButton\";\n  addButton.classList.add(\"btn\");\n  addButton.classList.add(\"btn-primary\");\n  addButton.setAttribute(\"type\", \"button\");\n  addButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  addButton.toggleAttribute(\"disabled\");\n  addButton.onclick = () => addTrip();\n  addButton.textContent = \"Add\";\n  footerElement.append(cancelButton, addButton);\n  bodyElement.append(fromToStationsEl);\n  headerElement.append(titleElement, headerButtonElement);\n  contentElement.append(headerElement, bodyElement, footerElement);\n  dialogElement.append(contentElement);\n  modalElement.append(dialogElement);\n  modalElement.addEventListener(\"hidden.bs.modal\", event => {\n    var modalEl: HTMLElement = document.getElementById(\"addTripModal\")!;\n    var modal: bootstrap.Modal = bootstrap.Modal.getInstance(modalEl)!;\n    modal.dispose();\n    modalEl.remove();\n  });\n  return new bootstrap.Modal(modalElement);\n}\n\nfunction addTripInputs(): void {\n  var addTripButton: HTMLElement = document.getElementById(\"addTripButton\")!;\n  var fromStationInputEl: HTMLElement = document.getElementById(\"fromStationDataList\")!;\n  var toStationInputEl: HTMLElement = document.getElementById(\"toStationDataList\")!;\n  var fromStationDatalist: HTMLElement = document.getElementById(\"fromStationOptions\")!;\n  var toStationDatalist: HTMLElement = document.getElementById(\"toStationOptions\")!;\n  var fromStationOptions: HTMLOptionElement[] = Array.from(fromStationDatalist.getElementsByTagName(\"option\"));\n  var toStationOptions: HTMLOptionElement[] = Array.from(toStationDatalist.getElementsByTagName(\"option\"));\n  var tripsListEl: HTMLElement = document.getElementById(\"tripsList\")!;\n  var tripsListItems: HTMLLIElement[] = Array.from(tripsListEl.getElementsByTagName(\"li\"));\n\n  var fromStationNames: string[] = fromStationOptions.map(function(option: HTMLElement): string {\n    return option.getAttribute(\"value\")!;\n  });\n\n  var toStationNames: string[] = toStationOptions.map(function(option: HTMLElement): string {\n    return option.getAttribute(\"value\")!;\n  });\n\n  var tripNames: string[] = tripsListItems.map(function(trip: HTMLElement): string {\n    return trip.textContent!;\n  });\n\n  // @ts-ignore\n  if (fromStationNames.includes(fromStationInputEl.value) && toStationNames.includes(toStationInputEl.value) && fromStationInputEl.value !== toStationInputEl.value && !tripNames.includes(fromStationInputEl.value.split(\" Station\").join(\"\") + \" to \" + toStationInputEl.value.split(\" Station\").join(\"\"))) {\n    addTripButton.removeAttribute(\"disabled\");\n  } else {\n    addTripButton.setAttribute(\"disabled\", \"\");\n  }\n}\n\nfunction addTrip(): void {\n  var container: CloudKit.Container = CloudKitJS.getDefaultContainer();\n  var database: CloudKit.Database = container.privateCloudDatabase;\n\n  var fromStationInputEl: HTMLElement = document.getElementById(\"fromStationDataList\")!;\n  var toStationInputEl: HTMLElement = document.getElementById(\"toStationDataList\")!;\n\n  // @ts-ignore\n  var fromStationOptionQuerySelector: string = \"div[id='fromStation'] datalist[id='fromStationOptions'] option[value='\" + fromStationInputEl.value + \"']\";\n  // @ts-ignore\n  var toStationOptionQuerySelector: string = \"div[id='toStation'] datalist[id='toStationOptions'] option[value='\" + toStationInputEl.value + \"']\";\n\n  var fromStationOptionEl: HTMLElement = document.querySelector(fromStationOptionQuerySelector)!;\n  var toStationOptionEl: HTMLElement = document.querySelector(toStationOptionQuerySelector)!;\n\n  var record: CloudKit.RecordToCreate = {\n    recordType: \"CD_Trip\",\n    fields: {\n      CD_entityName: {\n        type: \"STRING\",\n        value: \"Trip\"\n      },\n      CD_id: {\n        type: \"STRING\",\n        value: uuidv4().toUpperCase()\n      },\n      CD_fromId: {\n        type: \"STRING\",\n        value: fromStationOptionEl.id\n      },\n      CD_fromStopId: {\n        type: \"STRING\",\n        value: fromStationOptionEl.getAttribute(\"stopid\")\n      },\n      CD_fromName: {\n        type: \"STRING\",\n        value: fromStationOptionEl.getAttribute(\"value\")\n      },\n      CD_toId: {\n        type: \"STRING\",\n        value: toStationOptionEl.id\n      },\n      CD_toStopId: {\n        type: \"STRING\",\n        value: toStationOptionEl.getAttribute(\"stopid\")\n      },\n      CD_toName: {\n        type: \"STRING\",\n        value: toStationOptionEl.getAttribute(\"value\")\n      },\n      CD_dateAdded: {\n        type: \"TIMESTAMP\",\n        value: Date.now()\n      }\n    }\n  };\n\n  var options: CloudKit.RecordSaveOptions = {\n    zoneID: {\n      zoneName: \"com.apple.coredata.cloudkit.zone\"\n    }\n  };\n\n  database.saveRecords([record], options)\n    .then(response => {\n    })\n    .catch(error => {\n      console.error(error?.reason ?? \"Unknown error\");\n      errorModal(error).show();\n    });\n}\n\nfunction ckConfigErrorModal(error: CloudKit.CKError | undefined): bootstrap.Modal {\n  var modalElement: HTMLElement = document.createElement(\"div\");\n  var dialogElement: HTMLElement = document.createElement(\"div\");\n  var contentElement: HTMLElement = document.createElement(\"div\");\n  var headerElement: HTMLElement = document.createElement(\"div\");\n  var titleElement: HTMLElement = document.createElement(\"h5\");\n  var headerButtonElement: HTMLElement = document.createElement(\"button\");\n  var bodyElement: HTMLElement = document.createElement(\"div\");\n  var bodyParagraphElement: HTMLElement = document.createElement(\"p\");\n  var footerElement: HTMLElement = document.createElement(\"div\");\n  var closeButton: HTMLElement = document.createElement(\"button\");\n  modalElement.id = error?.uuid ?? uuidv4();\n  modalElement.classList.add(\"modal\");\n  modalElement.classList.add(\"fade\");\n  modalElement.setAttribute(\"tabindex\", \"-1\");\n  modalElement.setAttribute(\"aria-labelledby\", \"label-\" + modalElement.id);\n  modalElement.setAttribute(\"aria-hidden\", \"true\");\n  dialogElement.className = \"modal-dialog\";\n  contentElement.className = \"modal-content\";\n  headerElement.className = \"modal-header\";\n  titleElement.id = \"label-\" + modalElement.id;\n  titleElement.className = \"modal-title\";\n  titleElement.innerText = error?.ckErrorCode ?? \"Error\";\n  headerButtonElement.className = \"btn-close\";\n  headerButtonElement.setAttribute(\"type\", \"button\");\n  headerButtonElement.setAttribute(\"data-bs-dismiss\", \"modal\");\n  headerButtonElement.setAttribute(\"aria-label\", \"Close\");\n  bodyElement.className = \"modal-body\";\n  // @ts-ignore\n  bodyParagraphElement.innerText = error?.reason ?? error?.message ?? \"An unknown error occurred.\";\n  footerElement.className = \"modal-footer\";\n  closeButton.classList.add(\"btn\");\n  closeButton.classList.add(\"btn-secondary\");\n  closeButton.setAttribute(\"type\", \"button\");\n  closeButton.setAttribute(\"data-bs-dismiss\", \"modal\");\n  closeButton.textContent = \"Close\";\n  footerElement.append(closeButton);\n  bodyElement.append(bodyParagraphElement);\n  headerElement.append(titleElement, headerButtonElement);\n  contentElement.append(headerElement, bodyElement, footerElement);\n  dialogElement.append(contentElement);\n  modalElement.append(dialogElement);\n  return new bootstrap.Modal(modalElement);\n}\n\nfunction addTripAction(): void {\n  addTripWorkflow().show();\n  fetchStations();\n}\n\nfunction refreshTrips(): void {\n  unmountTrips();\n  fetchTrips();\n}\n\nfunction searchFunction(): void {\n  var inputEl: HTMLElement = document.getElementById(\"tripsSearch\")!;\n  // @ts-ignore\n  var filter: string = inputEl.value.toUpperCase();\n  var ulEl: HTMLElement = document.getElementById(\"tripsList\")!;\n  var liEls: HTMLCollectionOf<HTMLLIElement> = ulEl.getElementsByTagName(\"li\");\n  var index: number;\n  var txtValue: string;\n\n  for (index = 0; index < liEls.length; index++) {\n    txtValue = liEls[index].textContent || liEls[index].innerText;\n\n    if (txtValue.toUpperCase().indexOf(filter) > -1) {\n      liEls[index].style.display = \"\";\n    } else {\n      liEls[index].style.display = \"none\";\n    }\n  }\n}"],"sourceRoot":""}